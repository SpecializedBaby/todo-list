{% extends 'base.html' %}

{% block content %}
  <div class="container mt-5">
    <h1>Task List
      <a class="btn btn-primary float-right" href="{% url 'task_manager:task-create' %}">Create Task</a>
    </h1>

    <ul class="list-group mt-4">
      {% for task in task_list %}
        <li class="list-group-item">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h5>{{ task.content }}</h5>
              <p class="mb-1">
                {% if task.is_done %}
                  <span class="badge badge-success">Done</span>
                {% else %}
                  <span class="badge badge-warning">Not Done</span>
                {% endif %}
              </p>
              <p class="mb-1">
                Created at: {{ task.created_at|date:"Y-m-d H:i" }}
                {% if task.deadline %}
                  | Deadline: {{ task.deadline|date:"Y-m-d H:i" }}
                {% endif %}
              </p>
              <p class="mb-1">
                Tags:
                {% for tag in task.tags.all %}
                  <span class="badge badge-info">{{ tag.name }}</span>
                {% empty %}
                  No tags
                {% endfor %}
              </p>
            </div>
            <div>
              <a href="{% url 'task_manager:task-update' pk=task.id %}" class="btn btn-sm btn-outline-secondary">Update</a>
              <a href="{% url 'task_manager:task-delete' pk=task.id %}" class="btn btn-sm btn-outline-danger">Delete</a>
              <a href="{% url 'task_manager:toggle-task-status' task.pk %}" class="btn btn-sm btn-outline-primary">
                {% if task.is_done %}Undo{% else %}Complete{% endif %}
              </a>
            </div>
          </div>
        </li>
      {% empty %}
        <li class="list-group-item">There are no tasks in the todo list!</li>
      {% endfor %}
    </ul>
  </div>
{% endblock %}
